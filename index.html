<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Danylo Skorychenko</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="container">
        <aside class="sidebar">
            <img src="assets/cloud.jpeg" alt="Cloud" class="profile-image">
            <div class="name1">&nbsp;&nbsp;&nbsp;Danylo&nbsp;Skorychenko</div>
            <hr>
            <p class="description">
                Software Engineer,<br>
                Ethical Hacker.<br>
                <br>
                Hire me: <a href="mailto:your-email@example.com">your-email@example.com</a>
            </p>
            <hr>
            <!-- Other links -->
            <nav>
                <ul id="postList" class="postList">
                    <!-- List of posts will be added here -->
                </ul>
            </nav>
            <div class="sidebar-bottom-content">
                <hr/>
                <p class="sidebar-text">ðŸ™ƒ&nbsp;2023&nbsp;Danylo&nbsp;Skorychenko</p>
            </div>
        </aside>

        <section id="blogPosts" class="main-content">
            <!-- Blog posts will be added here -->
            <div id="infinite-scroll-placeholder"></div>
        </section>
    </div>

    <script>
        const postList = document.getElementById('postList')
        const blogPosts = document.getElementById('blogPosts')
        const postEls = []
        const tabEls = []
        let currentPage = 1

        async function getPosts() {
            let i = 1
            while (true) {
                try {
                    const html = await (await fetch(`post${i}.html`)).text()
                    const div = document.createElement('div')
                    div.innerHTML = html
                    div.id = `post${i}`
                    blogPosts.appendChild(div)
                    const title = html.split('>')[1].split('<')[0] || 'No title'
                    const navItem = document.createElement("li")
                    
                    navItem.innerHTML = `<a href="#post${i}">${title}</a>`
                    
                    postList.appendChild(navItem)
                    postEls.push(div)
                    tabEls.push(navItem)

                    i++

                    if (i > 20) break
                } catch (_) {
                    break
                }
            }
        }

        getPosts()

        function highlightTab() {
            const scrollPosition = blogPosts.scrollTop
            let selectedTabIndex = -1

            postEls.forEach((post, index) => {
                const postTop = post.offsetTop
                const postHeight = post.offsetHeight
                
                if (scrollPosition >= postTop && scrollPosition < postTop + postHeight) {
                    selectedTabIndex = index
                }
            })

            tabEls.forEach((tab, index) => {
                if (index === selectedTabIndex) {
                    tab.classList.add('highlighted')
                } else {
                    tab.classList.remove('highlighted')
                }
            })
        }

        blogPosts.addEventListener('scroll', highlightTab)
    </script>
</html>
